# Web Application - opentutorials

작성자 : DH Kim

이고잉님의 생활코딩 온라인 수업 내용을 기반으로한 정리입니다.



<div style="width:100%;overflow:hidden">
  <div id="-목차-" style="border:1px solid #D8D8D8;padding:20px;float:left;">

  <h2> 목차 </h2>
  <ul style="list-style:none;">
  <li>
  <a href="#1-html-이론">1.</a> HTML 이론
  </li>
  <ul style="list-style:none;">
  <li>
  <a href="#1-1-html-기본문법">1-1.</a> HTML 기본 문법
  </li>

  <li>
  <a href="#1-2-html-문법---속성">1-2.</a> HTML 문법 - 속성
  </li>

  <li>
  <a href="#1-3-html-문법---태그의-중첩">1-3.</a> HTML 문법 - 태그의 중첩
  </li>
  </ul>

  <li>
  <a href="#2-html-실습">2.</a> HTML 실습
  </li>
  <ul style="list-style:none;">
  <li>
  <a href="#2-1-모델링을-html로-만들기">2-1.</a> 모델링을 HTML로 만들기
  </li>

  <li>
  <a href="#2-2-의미론적인-웹semantic-web">2-2.</a> 의미론적인 웹(Semantic Web)
  </li>

  <li>
  <a href="#2-3-사이트-완성">2-3.</a> 사이트 완성
  </li>
  </ul>

  <li>
  <a href="#3-css-이론">3.</a> CSS 이론
  </li>

  <ul style="list-style:none;">
  <li>
  <a href="#3-1-css의-기본문법">3-1.</a> CSS의 기본문법
  </li>

  <li>
  <a href="#3-2-박스-모델">3-2.</a> 박스모델
  </li>

  <li>
  <a href="#-3-3-float">3-3.</a> float
  </li>
  </ul>

<li>
  <a href="#4-css-실습">4.</a> CSS 실습
</li>

<ul style="list-style:none;">
  <li>
  <a href="#4-1-css-실습1">4-1.</a> CSS 실습1
  </li>

  <li>
  <a href="#4-2-css-실습2">4-2.</a> CSS 실습2
  </li>
</ul>

<li>
  <a href="#5-프로그래밍js-php-이론">5.</a> 프로그래밍(JS, PHP 이론)
</li>

<ul style="list-style:none;">
  <li>
  <a href="#5-1-js-php---환경설정">5-1.</a> JS, PHP - 환경설정
  </li>

  <li>
  <a href="#5-2-js-php-프로그래밍">5-2.</a> JS, PHP 프로그래밍
  </li>

  <li>
  <a href="#5-3-웹페이지에-코드-삽입하기">5-3.</a> 웹페이지에 코드 삽입하기
  </li>

  <li>
  <a href="#5-4-데이터-타입과-연산자">5-4.</a> 데이터 타입과 연산자
  </li>

  <li>
  <a href="#5-5-디버깅">5-5.</a> 디버깅
  </li>
  <li>
  <a href="#5-6-변수">5-6.</a> 변수
  </li>

  <li>
  <a href="#5-7-비교">5-7.</a> 비교
  </li>
  <li>
  <a href="#5-8-조건문">5-8.</a> 조건문
  </li>
  <li>
  <a href="#5-9-로그인-기능-만들기">5-9.</a> 로그인 기능 만들기
  </li>
  <li>
  <a href="#5-10-반복문">5-10.</a> 반복문
  </li>
  <li>
  <a href="#5-11-배열">5-11.</a> 배열
  </li>
  <li>
  <a href="#5-12-함수">5-12.</a> 함수
  </li>
  <li>
  <a href="#5-13-ui-vs-api">5-13.</a> UI vs API
  </li>
  </ul>
  <li>
  <a href="#6-javascript-실습">6.</a> 자바스크립트 실습
  </li>
  <ul style="list-style:none;">
  <li>
  <a href="#6-1-실습1">6-1.</a> 실습1
  </li>
  <li>
  <a href="#6-2-실습2">6-2.</a> 실습2
  </li>
  <li>
  <a href="#6-3-실습3">6-3.</a> 실습3
  </li>
  <li>
  <a href="#6-4-실습4">6-4.</a> 실습4
  </li>
  <li>
  <a href="#6-5-실습5">6-5.</a> 실습5
  </li>
  </ul>
  <li>
  <a href="#7-php-실습">7.</a> PHP 실습
  </li>
  <ul style="list-style:none;">
  <li>
  <a href="#7-1-실습1">7-1.</a> 실습1
  </li>
  <li>
  <a href="#7-2-실습2">7-2.</a> 실습2
  </li>
  <li>
  <a href="#7-3-실습3">7-3.</a> 실습3
  </li>
  <li>
  <a href="#7-4-실습4">7-4.</a> 실습4
  </li>
  </ul>
  <li>
  <a href="#8-데이터베이스mysql">8.</a> 데이터베이스(MY SQL)
  </li>
  <ul style="list-style:none;">
  <li>
  <a href="#8-1-데이터베이스mysql-이론">8-1.</a> 데이터베이스(MySQL) 이론
  </li>
  <li>
  <a href="#8-2-mysql-실습">8-2.</a> MySQL 실습
  </li>
  <li>
  <a href="#8-3-관계형-데이터베이스-이론">8-3.</a> 관계형 데이터베이스 이론
  </li>
  <li>
  <a href="#8-4-관계형-데이터베이스-실습">8-4.</a> 관계형 데이터베이스 실습
  </li>
  </ul>
  <li>
  <a href="#9-보안">9.</a> 보안
  </li>
  </ul>
</div>
</div>
<p style="margin:2em;"></p>


---
## <a href="#-목차-">1.</a> HTML 이론

### <a href="#-목차-">1-1.</a> HTML 기본문법

`<!DOCTYPE>` : 마크업 언어용 DTD 태그.

`<html>` : DTD태그를 제외한 전부를 둘러싼다.

`<head>` : html문서의 속성을 지정하기 위한 태그, 타이틀이나 메타태그(문서 자체를 설명하는 태그)를 이곳에 넣는다.

`<body>` : html 문서의 내용을 나타내기 위한 태그, 표시할 문서의 레이아웃을 이곳에 넣는다


---

### <a href="#-목차-">1-2.</a> HTML 문법 - 속성
`<a>` : 하이퍼 링크를 생성하는 태그. href속성과 함께 사용한다


#### 예시

```
<a href = "http://github.com/inerplat"> github </a>
```
<a href = "http://github.com/inerplat"> github </a>

---

### <a href="#-목차-">1-3.</a> HTML 문법 - 태그의 중첩

`<li>` : 목록 작성시 각 항목(list item)은 `<li>`와 `</li>`사이에 넣는다.

`<ol>` : 순서 있는 목록(ordered list)을 표시한다

`<ul>` : 순서 없는 목록(unordered list)을 표시한다.

#### 예시
##### `<ol>`
```
<ol>
  <li>html</li>
  <li>css</li>
  <li>javascript</li>
</ol>

```
 <ol>
      <li>html</li>
      <li>css</li>
      <li>javascript</li>
</ol>

##### `<ul>`
```
<ul>
  <li>서울대학교</li>
  <li>고려대학교</li>
  <li>연세대학교</li>
</ul>

```
  <ul>
      <li>서울대학교</li>
      <li>고려대학교</li>
      <li>연세대학교</li>
  </ul>

---

## <a href="#-목차-">2.</a> HTML 실습
### <a href="#-목차-">2-1.</a> 모델링을 HTML로 만들기

`<h>` : 제목(heading)을 표시할때 사용된다.
> `<h1>`이 가장 크고 `<h6>`가 가장 작다.
> CSS를 사용하여 크기, 색상, 폰트를 변경할 수 있다.

---

### <a href="#-목차-">2-2.</a> 의미론적인 웹(Semantic Web)

#### XHTML->HTML5

#### 네비게이션
```
	<h1>JavaScript</h1>
		<nav>
			<ol>
				<li>JavaScript란?</li>
				<li>변수와 상수</li>
				<li>연산자</li>
			</ol>
		</nav>
```

### 컨텐츠
```
		<article>
			<h2>변수와 상수</h2>
			변수란?
			<ul>
				<li>변하는 값</li>
				<li>x=10일때 왼쪽항...</li>
			</ul>
		</article>
```

`<header>`, `<nav>`, `<article>` : 실제 화면에서 변하는 것은 없음

---

### <a href="#-목차-">2-3.</a> 사이트 완성
<img src='http://inerplat.esy.es/github_img/webapp_1.png' width=60% height=60% alt='사이트 구조' />

### 쉬어가기
#### 웹브라우저 (Client Side Tech)
<ul>
<li>HTML</li>
<li>CSS</li>
<li>Javascript</li>
</ul>


#### 웹서버(Server Side Tech)
<ul>
<li>PHP</li>
<li>MySQL</li>
</ul>

</section>

---

## <a href="#-목차-">3.</a> CSS 이론

### <a href="#-목차-">3-1.</a> CSS의 기본문법

##### CSS : Cascading Style Sheet
`<style>` : HTML+CSS 서로 공존 가능하게 해줌


##### 예시
```
h1
{
    color : red
}
```
`h1` : 선택자(selector)

`{color : red}` : 서술(description)

---

### <a href="#-목차-">3-2.</a> 박스 모델
<img src="http://inerplat.esy.es/github_img/boxmodel.gif" />

---

### <a href="#-목차-"> 3-3.</a> float

`<img src = "주소" />` : 이미지 삽입 태그

<img style="float:left;margin-right:5em" src="https://github.com/inerplat/WEB_Application-opentutorials/tree/master/03-3.%20float/float.png" />

컨텐츠가 나란히 배치되도록 함

---

## <a href="#-목차-">4.</a> CSS 실습

### <a href="#-목차-">4-1.</a> CSS 실습1

<img src="http://inerplat.esy.es/github_img/CSSbox.png" height=90% width=90% />

---

### <a href="#-목차-">4-2.</a> CSS 실습2

#### CSS와 html의 분리

```
<link rel="stylesheet" type="text/css" href="경로" />
```

---

## <a href="#-목차-">5.</a> 프로그래밍(JS, PHP 이론)

### <a href="#-목차-">5-1.</a> JS, PHP - 환경설정

#### php.ini

```
display_errors : on (에러표출)
opcache.enable= 0 (opcache를 사용 안하므로 빠르게 결과가 반영됨)
```
> 에러가 공격자에게 단서를 제공할 수 있으므로 실제 개발환경에서는 off 해야 한다.

---

### <a href="#-목차-">5-2.</a> JS, PHP 프로그래밍

#### JavaScript

정적인 HTML에 사용자의 입력으로 변화를 줌

#### PHP

여러 웹 문서들을 index.php로 통일

---

### <a href="#-목차-">5-3.</a> 웹페이지에 코드 삽입하기

<img src="#" />

---

### <a href="#-목차-">5-4.</a> 데이터 타입과 연산자

<table style="border-collapse:collapse;border-spacing:0;border-color:#ccc"><tr><th style="font-family:Arial, sans-serif;font-size:14px;font-weight:bold;padding:10px 5px;border-style:solid;border-width:0px;overflow:hidden;word-break:normal;border-color:#ccc;color:#333;background-color:#f0f0f0;border-top-width:1px;border-bottom-width:1px;text-align:center">JavaScript</th><th style="font-family:Arial, sans-serif;font-size:14px;font-weight:bold;padding:10px 5px;border-style:solid;border-width:0px;overflow:hidden;word-break:normal;border-color:#ccc;color:#333;background-color:#f0f0f0;border-top-width:1px;border-bottom-width:1px;text-align:center">PHP</th></tr><tr><td style="font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:0px;overflow:hidden;word-break:normal;border-color:#ccc;color:#333;background-color:#fff;border-top-width:1px;border-bottom-width:1px;text-align:center">10+10 -&gt; 20</td><td style="font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:0px;overflow:hidden;word-break:normal;border-color:#ccc;color:#333;background-color:#f9f9f9;border-top-width:1px;border-bottom-width:1px;text-align:center">10+10 -&gt; 20</td></tr><tr><td style="font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:0px;overflow:hidden;word-break:normal;border-color:#ccc;color:#333;background-color:#fff;border-top-width:1px;border-bottom-width:1px;text-align:center" rowspan="2">"10"+"10" -&gt; 1010</td><td style="font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:0px;overflow:hidden;word-break:normal;border-color:#ccc;color:#333;background-color:#f9f9f9;border-top-width:1px;border-bottom-width:1px;text-align:center">"10" + "10" -&gt; 20</td></tr><tr><td style="font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:0px;overflow:hidden;word-break:normal;border-color:#ccc;color:#333;background-color:#f9f9f9;border-top-width:1px;border-bottom-width:1px;text-align:center">"10"."10" -&gt; 1010</td></tr></table>

---

### <a href="#-목차-">5-5.</a> 디버깅

#### JavaScript

>웹브라우저의 개발자 도구 사용

#### PHP

>"아파치설치경로"/logs/error.log

---

### <a href="#-목차-">5-6.</a> 변수

#### JavaScript
```
<script type="text/javascript">
  name = "DH Kim";
  document.write("안녕하세요 "+name+"님");
</script>
```
>안녕하세요 DH Kim님

#### PHP

```
<?php
  $name = "DH Kim";
  echo "안녕하세요 ".$name."님";
?>
```

>안녕하세요 DH Kim님

---

### <a href="#-목차-">5-7.</a> 비교

#### JavaScript

```
<script type="text/javascript">
  document.write(1==2);
</script>
```

>false

#### PHP

```
<?php
  var_dump(1==2);
?>
```

>bool(false)

---

### <a href="#-목차-">5-8.</a> 조건문

#### JavaScript

```
<script type="text/javascript">
  result = (1==2);
  if(result)
  {
    document.write("참");
  }
  else
  {
    document.write("거짓");
  }
</script>
```

>거짓

#### PHP

```
<?php
  $result=(2==2);
  if($result)
  {
    echo "참";
  }
  else
  {
    echo "거짓";
  }
?>
```

>참

---

### <a href="#-목차-">5-9.</a> 로그인 기능 만들기

<img src="#" />

<img src="#" />

---

### <a href="#-목차-">5-10.</a> 반복문


#### JavaScript

```
<script type="text/javascript">
    i = 0;
    while(i < 5){
      document.write("<li>hello world</li>");
      i = i + 1;
    }
</script>
```

><li> hello world </li>
><li> hello world </li>
><li> hello world </li>
><li> hello world </li>
><li> hello world </li>

### PHP

```
<?php
  $i = 0;
  while($i < 5){
    echo "<li>hello world</li>";
    $i = $i + 1;
  }
?>
```

><li> hello world </li>
><li> hello world </li>
><li> hello world </li>
><li> hello world </li>
><li> hello world </li>

---

### <a href="#-목차-">5-11.</a> 배열


#### JavaScript

```
<script type="text/javascript">
  list = new Array("one", "two", "three");
  document.write(list[2]);
  document.write(list.length);
</script>
```

>three


```
list = new Array("A", "B", "C", "D", "E");
i = 0;
while(i < list.length){
  document.write("<li>"+list[i]+"</li>");
  i = i + 1;
}
```

> <li>A</li>
> <li>B</li>
> <li>C</li>
> <li>D</li>
> <li>E</li>

#### PHP

```
<?php
  $list = array("one", "two", "three");
  echo $list[2];
  echo count($list);
?>
```

>three

```
<?php
$list = array("A", "B", "C", "D");
$i = 0;
while($i < count($list)){
  echo "<li>".$list[$i]."</li>";
  $i = $i + 1;
}
?>
```

> <li>A</li>
> <li>B</li>
> <li>C</li>
> <li>D</li>

---

### <a href="#-목차-">5-12.</a> 함수


#### JavaScript

```
function a(input){
  return input+1;
}
document.write(a(6));
```

>7

#### PHP

```
<?php
function a($input){
  return $input-1;
}
echo a(6);
```

>5

---

### <a href="#-목차-">5-13.</a> UI vs API

<img src="#" />

<img src="#" />

---

## <a href="#-목차-">6.</a> JavaScript 실습

### <a href="#-목차-">6-1.</a> 실습1

#### 체크박스
```
<input type="checkbox" value="white" />
```

<input type="checkbox" value="white" />

#### 버튼

```
<input type="button" value="hi" />
```

<input type="button" value="hi" />

#### 텍스트창

```
<input type="text"/>
```

<input type="text"/>

#### 버튼클릭시 알림창

```
<input type="button" value="Hello World" onclick="alert('Hello World')"/>
```

<input type="button" value="Hello World" onclick="alert('Hello World')"/>

#### 텍스트창 focus, blur

```
<input type="text" onfocus="alert('Hello World')" onblur="alert('blur')"/>
```

<input type="text" />

> 사이트의 원할한 구성을 위해 onfocus, onblur속성은 해제하였습니다.

---

### <a href="#-목차-">6-2.</a> 실습2

#### text박스의 내용을 alert창으로
```
  <input type="text" id="user_input" />
  <input type="button" value="alert" onclick="alert(document.getElementById('user_input').value)"/>
```
<a href ="http://inerplat.esy.es/javascript/1.php">테스트</a>

---

### <a href="#-목차-">6-3.</a> 실습3

#### 'target' id에 .em스타일 지정

```
<style>
  .em{
    text-decoration:underline;
  }
</style>
```
```
<input type="button" value="강조" onclick="document.getElementById('target').className='em'" />
```
<a href ="http://inerplat.esy.es/javascript/2.php">테스트1</a>

<a href ="http://inerplat.esy.es/javascript/2-1.php">테스트2</a>

---

### <a href="#-목차-">6-4.</a> 실습4

#### index.html
```
  <div id="control">
    <input type="button" value="white" onclick="document.getElementById('target').className='white'" />
    <input type="button" value="black" onclick="document.getElementById('target').className='black'"  />
  </div>\
```
<a href ="http://inerplat.esy.es/javascript/html/">테스트</a>

---

### <a href="#-목차-">6-5.</a> 실습5

#### script파일 분리
```
<script src="http://localhost/javascript/html/script.js"> </script>
```

---

## <a href="#-목차-">7.</a> PHP 실습

### <a href="#-목차-">7-1.</a> 실습1

<img src="#" />

---

### <a href="#-목차-">7-2.</a> 실습2

<img src="#" />

---

### <a href="#-목차-">7-3.</a> 실습3

#### index.php
```
<?php
  echo file_get_contents("list.txt");
?>
```

#### list.txt
```
<li><a href="http://localhost/index.php?id=1">JavaScript란?</a></li>
<li><a href="http://localhost/index.php?id=2">변수와 상수</a></li>
<li><a href="http://localhost/index.php?id=3">연산자</a></li>
```

---

### <a href="#-목차-">7-4.</a> 실습4
#### index.php
```
<?php
  if( empty($_GET['id']) == false ) {
    echo file_get_contents($_GET['id'].".txt");
  }
?>
```
#### 1.txt
```
<h2>JavaScript란?</h2>
JavaScript는 html을 제어합니다.
```

#### 2.txt
```
<h2>변수와 상수</h2>
변수는 바뀌는 것 상수는 바뀌지 않은 것
```

#### 3.txt
```
<h2>연산자</h2>
연산자는 계산하는 것입니다
```

---

## <a href="#-목차-">8.</a> 데이터베이스(MySQL)

### <a href="#-목차-">8-1.</a> 데이터베이스(MySQL) 이론

#### 윈도우

```
mysql -hlocalhost -uroot -p
```

#### 리눅스, 맥
```
./mysql -hlocalhost -uroot -p
```

#### 데이터베이스 보기
```
show databases;
```

#### 데이터베이스 생성
```
CREATE DATABASE opentutorials CHARACTER SET utf8 COLLATE utf8_general_ci;
```

#### 데이터베이스 선택
```
use opentutorials;
```

#### 테이블 생성
```
CREATE TABLE `topic` (
`id` int(11) NOT NULL AUTO_INCREMENT,
  `title` varchar(100) NOT NULL,
  `description` text NOT NULL,
  `author` varchar(30) NOT NULL,
  `created` datetime NOT NULL,
  PRIMARY KEY (id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
```

#### 생성된 테이블 확인
```
show tables;
```

#### 테이블 구조 보기
```
desc topic;
```

#### 데이터 삽입
```
INSERT INTO `topic` (`id`, `title`, `description`, `author`, `created`) VALUES(1, 'About JavaScript', '<h3>Desctiption</h3>\r\n<p>JavaScript  is a dynamic computer programming language. It is most commonly used as part of web browsers, whose implementations allow client-side scripts to interact with the user, control the browser, communicate asynchronously, and alter the document content that is displayed.</p>\r\n<p>\r\nDespite some naming, syntactic, and standard library similarities, JavaScript and Java are otherwise unrelated and have very different semantics. The syntax of JavaScript is actually derived from C, while the semantics and design are influenced by the Self and Scheme programming languages.\r\n</p>\r\n<h3>See Also</h3>\r\n<ul>\r\n  <li><a href="http://en.wikipedia.org/wiki/Dynamic_HTML">Dynamic HTML and Ajax (programming)</a></li>\r\n  <li><a href="http://en.wikipedia.org/wiki/Web_interoperability">Web interoperability</a></li>\r\n  <li><a href="http://en.wikipedia.org/wiki/Web_accessibility">Web accessibility</a></li>\r\n</ul>\r\n', 'egoing', '2015-03-31 12:14:00');
INSERT INTO `topic` (`id`, `title`, `description`, `author`, `created`) VALUES(2, 'Variable and Constant', '<h3>Desciption</h3>\r\n\r\nIn computer programming, a variable or scalar is a storage location paired with an associated symbolic name (an identifier), which contains some known or unknown quantity or information referred to as a value. The variable name is the usual way to reference the stored value; this separation of name and content allows the name to be used independently of the exact information it represents. The identifier in computer source code can be bound to a value during run time, and the value of the variable may thus change during the course of program execution.\r\n\r\n<h3>See Also</h3>\r\n<ul>\r\n<li>Non-local variable</li>\r\n<li>Variable interpolation</li>\r\n</ul>\r\n', 'k8805', '2015-05-14 10:04:00');
INSERT INTO `topic` (`id`, `title`, `description`, `author`, `created`) VALUES(3, 'Opeartor', '<h2>Operator</h2>\r\n<h3>Description</h3>\r\n<p>Programming languages typically support a set of operators: constructs which behave generally like functions, but which differ syntactically or semantically from usual functions</p>\r\n<p>Common simple examples include arithmetic (addition with +, comparison with >) and logical operations (such as AND or &&). </p>\r\n', 'egoing', '2015-06-18 05:00:00');
INSERT INTO `topic` (`id`, `title`, `description`, `author`, `created`) VALUES(4, 'Conditional', '<h3>Description</h3>\r\n<p>In computer science, conditional statements, conditional expressions and conditional constructs are features of a programming language which perform different computations or actions depending on whether a programmer-specified boolean condition evaluates to true or false. Apart from the case of branch predication, this is always achieved by selectively altering the control flow based on some condition.</p>\r\n<p>In imperative programming languages, the term "conditional statement" is usually used, whereas in functional programming, the terms "conditional expression" or "conditional construct" are preferred, because these terms all have distinct meanings.</p>\r\n<h3>See Also</h3>\r\n<ul>\r\n<li><a href="http://en.wikipedia.org/wiki/Branch_(computer_science)" title="Branch (computer science)">Branch (computer science)</a></li>\r\n<li><a href="http://en.wikipedia.org/wiki/Conditional_compilation" title="Conditional compilation">Conditional compilation</a></li>\r\n<li><a href="http://en.wikipedia.org/wiki/Dynamic_dispatch" title="Dynamic dispatch">Dynamic dispatch</a> for another way to make execution choices</li>\r\n<li><a href="http://en.wikipedia.org/wiki/McCarthy_Formalism" title="McCarthy Formalism">McCarthy Formalism</a> for history and historical references</li>\r\n<li><a href="http://en.wikipedia.org/wiki/Named_condition" title="Named condition" class="mw-redirect">Named condition</a></li>\r\n<li><a href="http://en.wikipedia.org/wiki/Test_(Unix)" title="Test (Unix)">Test (Unix)</a></li>\r\n<li><a href="http://en.wikipedia.org/wiki/Yoda_conditions" title="Yoda conditions">Yoda conditions</a></li>\r\n</ul>', 'c2', '2015-07-25 00:00:00');
```

#### 데이터 확인하기
```
SELECT * FROM topic
```

---

### <a href="#-목차-">8-2.</a> MySQL 실습

#### mysql 로그인 및 topic테이블 정보 저장
```
<?php
$conn = mysqli_connect("localhost", "root", 111111);
mysqli_select_db($conn, "opentutorials");
$result = mysqli_query($conn, "SELECT * FROM topic");
?>
```

#### nav
```
<?php
while( $row = mysqli_fetch_assoc($result)){
  echo '<li><a href="http://localhost/index.php?id='.$row['id'].'">'.$row['title'].'</a></li>'."\n";}
?>
```

#### article
```
<?php
if(empty($_GET['id']) === false ) {
    $sql = 'SELECT * FROM topic WHERE id='.$_GET['id'];
    $result = mysqli_query($conn, $sql);
    $row = mysqli_fetch_assoc($result);
    echo '<h2>'.$row['title'].'</h2>';
    echo $row['description'];
}
?>
```

#### write.php
```
<form action="process.php" method="post">
  <p>
    제목 : <input type="text" name="title">
  </p>
  <p>
    작성자 : <input type="text" name="author">
  </p>
  <p>
    본문 : <textarea name="description"></textarea>
  </p>
  <input type="submit" name="name">
</form>
```

#### process.php
```
<?php
$conn = mysqli_connect("localhost", "root", 111111);
mysqli_select_db($conn, "opentutorials");
$sql = "INSERT INTO topic (title,description,author,created) VALUES('".$_POST['title']."', '".$_POST['description']."', '".$_POST['author']."', now())";
$result = mysqli_query($conn, $sql);
header('Location: http://localhost/index.php');
?>
```

---

### <a href="#-목차-">8-3.</a> 관계형 데이터베이스 이론

#### 단일테이블

<div style="width:100%;overflow:hidden;">

<section style="margin:0px;padding;0px;float:left;">
<h4>topic</h4>
<table class="tg" id="table" style="margin:0px;width:auto;float:left" >

  <tr>
    <th class="tg-s6z2">id</th>
    <th class="tg-s6z2">title</th>
    <th class="tg-s6z2">author</th>
  </tr>
  <tr>
    <td class="tg-s6z2">1</td>
    <td class="tg-spn1">About JavaScript</td>
    <td class="tg-s6z2">1</td>
  </tr>
  <tr>
    <td class="tg-s6z2">2</td>
    <td class="tg-spn1">Variable and Constant</td>
    <td class="tg-s6z2">3</td>
  </tr>
  <tr>
    <td class="tg-s6z2">3</td>
    <td class="tg-spn1">Operator</td>
    <td class="tg-s6z2">1</td>
  </tr>
  <tr>
    <td class="tg-s6z2">4</td>
    <td class="tg-spn1">Conditional</td>
    <td class="tg-s6z2">2</td>
  </tr>
  <tr>
    <td class="tg-s6z2">5</td>
    <td class="tg-spn1">Function</td>
    <td class="tg-s6z2">2</td>
  </tr>
  <tr>
    <td class="tg-s6z2">6</td>
    <td class="tg-spn1">Object</td>
    <td class="tg-s6z2">3</td>
  </tr>
</table>

</section>

<section style="float:left;margin-right:5em">
<p></p>
</section>

<section style="float:left">
<h4> user</h4>
<table class="tg" id="ttable" sstyle="border:solid;margin:0px;width:auto;float:right">
  <tr>
    <th class="tg-s6z2">id</th>
    <th class="tg-s6z2">name</th>
  </tr>
  <tr>
    <td class="tg-s6z2">1</td>
    <td class="tg-spn1">egoing</td>
  </tr>
  <tr>
    <td class="tg-s6z2">2</td>
    <td class="tg-spn1">jin</td>
  </tr>
  <tr>
    <td class="tg-s6z2">3</td>
    <td class="tg-spn1">k8805</td>
  </tr>
  <tr>
    <td class="tg-s6z2">4</td>
    <td class="tg-spn1">sorialgi</td>
  </tr>
  <tr>
    <td class="tg-s6z2">5</td>
    <td class="tg-spn1">lily</td>
  </tr>
  <tr>
    <td class="tg-s6z2">6</td>
    <td class="tg-spn1">happydeveloper</td>
  </tr>
</table>
</section>

</div>



topic테이블의 author과 user테이블의 id를 결합하여 관계형테이블로 만든다.
```
SELECT title,name FROM topic LEFT JOIN user ON topic.author = user.id
```

---

#### 관계형 테이블
##### topic+user
<table class="tg">
  <tr>
    <th class="tg-s6z2">title</th>
    <th class="tg-s6z2">name</th>
  </tr>
  <tr>
    <td class="tg-s6z2">About JavaScript</td>
    <td class="tg-spn1">egoing</td>
  </tr>
  <tr>
    <td class="tg-s6z2">Variable and Constant</td>
    <td class="tg-spn1">k8805</td>
  </tr>
  <tr>
    <td class="tg-s6z2">Operator</td>
    <td class="tg-spn1">egoing</td>
  </tr>
  <tr>
    <td class="tg-s6z2">Conditional</td>
    <td class="tg-spn1">jin</td>
  </tr>
  <tr>
    <td class="tg-s6z2">Function</td>
    <td class="tg-spn1">jin</td>
  </tr>
  <tr>
    <td class="tg-s6z2">Object</td>
    <td class="tg-spn1">k8805</td>
  </tr>
</table>

---

### <a href="#-목차-">8-4.</a> 관계형 데이터베이스 실습

#### db.sql
```
SET FOREIGN_KEY_CHECKS=0;

-- ----------------------------
-- Table structure for `topic`
-- ----------------------------
DROP TABLE IF EXISTS `topic`;
CREATE TABLE `topic` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `title` varchar(100) NOT NULL,
  `description` text NOT NULL,
  `author` int(11) NOT NULL,
  `created` datetime NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=8 DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of topic
-- ----------------------------
INSERT INTO `topic` VALUES ('1', 'About JavaScript', '<h3>Desctiption</h3>\r\n<p>JavaScript  is a dynamic computer programming language. It is most commonly used as part of web browsers, whose implementations allow client-side scripts to interact with the user, control the browser, communicate asynchronously, and alter the document content that is displayed.</p>\r\n<p>\r\nDespite some naming, syntactic, and standard library similarities, JavaScript and Java are otherwise unrelated and have very different semantics. The syntax of JavaScript is actually derived from C, while the semantics and design are influenced by the Self and Scheme programming languages.\r\n</p>\r\n<h3>See Also</h3>\r\n<ul>\r\n  <li><a href=\"http://en.wikipedia.org/wiki/Dynamic_HTML\">Dynamic HTML and Ajax (programming)</a></li>\r\n  <li><a href=\"http://en.wikipedia.org/wiki/Web_interoperability\">Web interoperability</a></li>\r\n  <li><a href=\"http://en.wikipedia.org/wiki/Web_accessibility\">Web accessibility</a></li>\r\n</ul>\r\n', '1', '2015-03-31 12:14:00');
INSERT INTO `topic` VALUES ('2', 'Variable and Constant', '<h3>Desciption</h3>\r\n\r\nIn computer programming, a variable or scalar is a storage location paired with an associated symbolic name (an identifier), which contains some known or unknown quantity or information referred to as a value. The variable name is the usual way to reference the stored value; this separation of name and content allows the name to be used independently of the exact information it represents. The identifier in computer source code can be bound to a value during run time, and the value of the variable may thus change during the course of program execution.\r\n\r\n<h3>See Also</h3>\r\n<ul>\r\n<li>Non-local variable</li>\r\n<li>Variable interpolation</li>\r\n</ul>\r\n', '3', '2015-05-14 10:04:00');
INSERT INTO `topic` VALUES ('3', 'Opeartor', '<h2>Operator</h2>\r\n<h3>Description</h3>\r\n<p>Programming languages typically support a set of operators: constructs which behave generally like functions, but which differ syntactically or semantically from usual functions</p>\r\n<p>Common simple examples include arithmetic (addition with +, comparison with >) and logical operations (such as AND or &&). </p>\r\n', '1', '2015-06-18 05:00:00');
INSERT INTO `topic` VALUES ('4', 'Conditional', '<h3>Description</h3>\r\n<p>In computer science, conditional statements, conditional expressions and conditional constructs are features of a programming language which perform different computations or actions depending on whether a programmer-specified boolean condition evaluates to true or false. Apart from the case of branch predication, this is always achieved by selectively altering the control flow based on some condition.</p>\r\n<p>In imperative programming languages, the term \"conditional statement\" is usually used, whereas in functional programming, the terms \"conditional expression\" or \"conditional construct\" are preferred, because these terms all have distinct meanings.</p>\r\n<h3>See Also</h3>\r\n<ul>\r\n<li><a href=\"http://en.wikipedia.org/wiki/Branch_(computer_science)\" title=\"Branch (computer science)\">Branch (computer science)</a></li>\r\n<li><a href=\"http://en.wikipedia.org/wiki/Conditional_compilation\" title=\"Conditional compilation\">Conditional compilation</a></li>\r\n<li><a href=\"http://en.wikipedia.org/wiki/Dynamic_dispatch\" title=\"Dynamic dispatch\">Dynamic dispatch</a> for another way to make execution choices</li>\r\n<li><a href=\"http://en.wikipedia.org/wiki/McCarthy_Formalism\" title=\"McCarthy Formalism\">McCarthy Formalism</a> for history and historical references</li>\r\n<li><a href=\"http://en.wikipedia.org/wiki/Named_condition\" title=\"Named condition\" class=\"mw-redirect\">Named condition</a></li>\r\n<li><a href=\"http://en.wikipedia.org/wiki/Test_(Unix)\" title=\"Test (Unix)\">Test (Unix)</a></li>\r\n<li><a href=\"http://en.wikipedia.org/wiki/Yoda_conditions\" title=\"Yoda conditions\">Yoda conditions</a></li>\r\n</ul>', '2', '2015-07-25 00:00:00');
INSERT INTO `topic` VALUES ('5', 'Function', 'A function model or functional model in systems engineering and software engineering is a structured representation of the functions (activities, actions, processes, operations) within the modeled system or subject area.', '2', '0000-00-00 00:00:00');
INSERT INTO `topic` VALUES ('6', 'Object', 'In computer science, an object is a location in memory having a value and possibly referenced by an identifier. An object can be a variable, a data structure, or a function. In the class-based object-oriented programming paradigm, \"object\" refers to a particular instance of a class where the object can be a combination of variables, functions, and data structures. In relational database management, an object can be a table or column, or an association between data and a database entity (such as relating a person\'s age to a specific person)', '3', '0000-00-00 00:00:00');

-- ----------------------------
-- Table structure for `user`
-- ----------------------------
DROP TABLE IF EXISTS `user`;
CREATE TABLE `user` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(20) NOT NULL,
  `password` varchar(30) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=8 DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of user
-- ----------------------------
INSERT INTO `user` VALUES ('1', 'egoing', '111111');
INSERT INTO `user` VALUES ('2', 'jin', '222222');
INSERT INTO `user` VALUES ('3', 'k8805', '333333');
INSERT INTO `user` VALUES ('4', 'sorialgi', '444444');
INSERT INTO `user` VALUES ('5', 'lily', '555555');
INSERT INTO `user` VALUES ('6', 'happydeveloper', '666666');
```
#### index.php
```
<?php
if(empty($_GET['id']) === false ) {
    $sql = "SELECT topic.id,title,name,description FROM topic LEFT JOIN user ON topic.author = user.id WHERE topic.id=".$_GET['id'];
    $result = mysqli_query($conn, $sql);
    $row = mysqli_fetch_assoc($result);
    echo '<h2>'.$row['title'].'</h2>';
    echo '<p>'.$row['name'].'</p>';
    echo $row['description'];
}
?>
```

#### process.php
```
<?php
if($result->num_rows == 0){
  $sql = "INSERT INTO user (name, password) VALUES('".$_POST['author']."', '111111')";
  mysqli_query($conn, $sql);
  $user_id = mysqli_insert_id($conn);
} else {
  $row = mysqli_fetch_assoc($result);
  $user_id = $row['id'];
}
$sql = "INSERT INTO topic (title,description,author,created) VALUES('".$_POST['title']."', '".$_POST['description']."', '".$user_id."', now())";
$result = mysqli_query($conn, $sql);
header('Location: http://localhost/index.php');
?>
```

---

## <a href="#-목차-">9.</a> 보안

#### script태그를 무력화 시키는 방법
```
<?php
   echo htmlspecialchars('<script>alert(1);</script>');
?>
```

#### SQL Injection 방지
```
<?php
  $password = mysqli_real_escape_string($conn, $_GET['password']);
?>
```
